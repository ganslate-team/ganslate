# Train with identity loss and mixed precision
project_dir: "./projects/nki_cervix_cbct_to_ct"
use_cuda: True
n_iters: 30000
n_iters_decay: 0
batch_size: 1
mixed_precision: True

logging:
    checkpoint_dir: ./checkpoints/cbct_ex11/
    wandb:
        project: "Cervix_CBCT"
        image_filter: 
            min: 0.289 # Corresponds to HU window of W:350, L: 40 between [0, 1]
            max: 0.40

    log_freq: 100
    checkpoint_freq: 1000

dataset: 
    name: "CBCTtoCTDataset"
    root: /home/rt/workspace_suraj/s.pai/cervix_resampled_v2/train
    hounsfield_units_range: [-1024, 2048]
    num_workers: 4
    patch_size: [16, 224, 224]
    enable_masking: True
    enable_bounding: True
    
gan:  
    name: "PiCycleGAN"

generator:
  name: Vnet3D
  in_channels: 1
  use_memory_saving: False
  use_inverse: True
  is_separable: False
  down_blocks: [2, 2, 3]
  up_blocks: [3, 3, 3]

discriminator:
    name: "PatchGAN3D"
    n_layers: 2
    in_channels: 1

optimizer:
  lambda_A: 25.0
  lambda_B: 25.0
  lambda_identity: 0.5
  lambda_inverse: 0.0
  proportion_ssim: 0.84
  lr_D: 0.0002
  lr_G: 0.0004

metrics: 
    ssim: True
    output_distributions_D: True

evaluation:
  freq: 2000
  samples: 10
  dataset: 
    name: "CBCTtoCTEvalDataset"
    root: /home/rt/workspace_suraj/s.pai/cervix_resampled_v2

